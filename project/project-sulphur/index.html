<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.31.1" />
  <meta name="author" content="Stan Pepels">
  <meta name="description" content="Game Tools / Engine programmer">

  
  <link rel="alternate" hreflang="en-us" href="/project/project-sulphur/">

  
  


  

  
  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Stan Pepels">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="Stan Pepels">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/project/project-sulphur/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Stan Pepels">
  <meta property="og:url" content="/project/project-sulphur/">
  <meta property="og:title" content="project sulphur | Stan Pepels">
  <meta property="og:description" content=""><meta property="og:image" content="/img/headers/sulphur-header.png">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2017-03-20T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2017-03-20T00:00:00&#43;00:00">
  

  

  <title>project sulphur | Stan Pepels</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Stan Pepels</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        

        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        

        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>



<article class="article article-project" itemscope itemtype="http://schema.org/Article">

  
<div class="article-header">
  <img src="/img/headers/sulphur-header.png" class="article-banner" itemprop="image">
  
</div>



  <div class="article-container">
    <div class="pub-title">
      <h1 itemprop="name">project sulphur</h1>
      <span class="pub-authors" itemprop="author">&nbsp;</span>
    </div>

    
    <div class="slideshow-container">
      
      
      
      
      <div class="mySlides slideshow_fade">
        <div class="numbertext"> 1 / 2</div>
        
        <img src="/slideshows/sulphur-engine/overview_img.png" style="width:100%">
         <div class="text">first test img</div>
        
      </div>
      
      
      
      <div class="mySlides slideshow_fade">
        <div class="numbertext"> 2 / 2</div>
        
        <img src="/slideshows/sulphur-engine/move_gizmo.png" style="width:100%">
         <div class="text">first test img</div>
        
      </div>
      
      
      <a class="prev_btn" id="slideshow_btn" onclick="plusSlides(-1)">&#10094;</a>
      <a class="next_btn" id="slideshow_btn" onclick="plusSlides(1)">&#10095;</a>
      
    </div>
    <div style="text-align:center">
      
      <span class="dot" onclick="currentSlide( 0 )"></span>
      
      <span class="dot" onclick="currentSlide( 1 )"></span>
      
    </div>
    

    
    <a class="snippet-toggle btn btn-primary btn-large active" onclick="toggleSnippets()">code snippets</a>
    <div class="snippet-container">
      <div class="slideshow-container">
        
        
        
        
        <div class="snippet slideshow_fade">
          <div class="numbertext"> 1 / 4</div>
          <div class="codesnippet">
            <pre><code class="cpp">
        #pragma once
#include &#34;tools/builder/base/flags_base.h&#34;
#include &lt;foundation/utils/template_util.h&gt;
#include &lt;foundation/containers/vector.h&gt;

namespace sulphur 
{
  namespace builder 
  {
    class ModelPipeline;
    class MaterialPipeline;
    class MeshPipeline;
    class ShaderPipeline;
    class TexturePipeline;
    class SkeletonPipeline;
    class AnimationPipeline;
    class ScriptPipeline;
    class AudioPipeline;
    class SceneLoader;

    /**
    *@struct sulphur::builder::Syntax
    *@brief structure describing the syntax of a command
    *@author Stan Pepels
    */
    struct Syntax
    {
      const char* key; //!&lt; key value with which to access the command
      foundation::Vector&lt;Flag*&gt; valid_flags; //!&lt; flags that can be used with this command
    };

    /**
    *@class sulphur::builder::CommandInput
    *@brief helper class for queryng the command input
    *@author Stan Pepels
    */
    class CommandInput
    {
      using Flags = foundation::Vector&lt;Flag*&gt;; //!&lt; flags container
      using FlagArgs = foundation::Vector&lt;foundation::String&gt;; //!&lt; arguments used with each flag

    public:
      /**
      *@brief constructor
      */
      CommandInput();

      /**
      *@brief construct input class with flags and arguments
      *@param[in] flags (sulphur::builder::CommandInput::Flags) flags parsed from a command line
      *@param[in] flag_args (sulphur::builder::CommandInput::FlagArgs) arguments belonging to the flag. 
      *@remark if no argument is found the entry will be empty
      */
      CommandInput(Flags flags, FlagArgs flag_args);

      /**
      *@brief destructor
      */
      ~CommandInput();

      /**
      *@brief get argument that goes with flag of type T. use this to query a flag that can be used multiple times
      *@param[in] index (unsigned int) index specifying what the flag to query
      */
      template&lt;typename T&gt;
      const char* GetFlagArg(unsigned int index) const;

      /**
      *@brief get argument that goes with flag of type T. use this to query if a flag can only occur once
      */
      template&lt;typename T&gt;
      const char* GetFlagArg() const;

      /**
      *@brief check if flag of type T was used. use this to query a flag that can be used multiple times
      *@param[out] num_occurrences (unsigned int) number of times the flag was used. 
      */
      template&lt;typename T&gt;
      bool HasFlag(unsigned int&amp; num_occurrences) const;

      /**
      *@brief check if flag of type T was used. use this to query if a flag can only occur once
      */
      template&lt;typename T&gt;
      bool HasFlag() const;

      /**
       * @brief Returns the number of flags of a certain type.
       * @tparam T Flag class to get the count from.
       * @return (unsigned int) The number of flags of type T.
       */
      template&lt;typename T&gt;
      unsigned int FlagCount() const;

    private:
      Flags flags_; //!&lt; flags parsed from the command line used to call a command
      FlagArgs flag_args_;//!&lt; arguments belonging to flags parsed from the command line used to call a command
    };

    /**
    *@class sulphur::builder::ICommand
    *@brief base class for commands. a command registered by the command system must be derived from this class
    *@author Stan Pepels
    */
    class ICommand
    {
    public:
      /**
      *@brief constructor
      *@param[in] key used to access this command
      */
      ICommand(const char* key);

      /**
      *@brief destructor
      */
      ~ICommand();

      /**
      *@brief get the command syntax
      */
      Syntax syntax();

      /**
      *@brief get the key passed in the constructor 
      */
      const char* key();

      /**
      *@brief executes the command.
      *@param[in] input (const sulphur::builder::CommandInput&amp;) container holding input from the parsed command line.
      */
      virtual void Run(const CommandInput&amp; input) = 0;

      /**
      *@brief check if the command line first input matches the command key value
      *@param[in] command_line (const char*) command recieved from console or command prompt
      */
      bool operator== (const char* command_line) const;

      /**
      *@brief get the description of the command
      *@remark if not implemented a default description will be returned
      */
      virtual const char* GetDescription() const;

      /**
      *@brief sets the pipelines this convert command has to use.
      *@param[in] model_pipeline (sulphur::builder::ModelPipeline*) a model pipeline
      *@param[in] mesh_pipeline (sulphur::builder::MeshPipeline*) a mesh pipeline
      *@param[in] material_pipeline (sulphur::builder::MaterialPipeline*) a material pipeline
      *@param[in] texture_pipeline (sulphur::builder::TexturePipeline*) a texture pipeline
      *@param[in] shader_pipeline (sulphur::builder::ShaderPipeline*) a shader pipeline
      *@param[in] skeleton_pipeline (sulphur::builder::SkeletonPipeline*) a skeleton pipeline
      *@param[in] animation_pipeline (sulphur::builder::AnimationPipeline*) an animation pipeline
      *@param[in] script_pipeline (sulphur::builder::ScriptPipeline*) a script pipeline
      *@param[in] audio_pipeline (sulphur::builder::AudioPipeline*) an audio pipeline
      *@param[in] scene_loader (sulphur::builder::SceneLoader*) a scene loader
      */
      void SetPipelines(ModelPipeline* model_pipeline,
        MeshPipeline* mesh_pipeline, MaterialPipeline* material_pipeline,
        TexturePipeline* texture_pipeline, ShaderPipeline* shader_pipeline,
        SkeletonPipeline* skeleton_pipeline, AnimationPipeline* animation_pipeline,
        ScriptPipeline* script_pipeline, AudioPipeline* audio_pipeline, 
        SceneLoader* scene_loader);

    protected:
      /**
      *@brief specify what flags are valid for use with this command. each type in Args... will be valid.
      */
      template&lt;typename... Args&gt;
      bool SetValidFlags();

      /**
      *@brief set a flag to be allowed multiple times when using this command
      *@param[in] value (bool) value to set. By default flags can only occur once in a command
      */
      template&lt;typename T&gt;
      void AllowMultipleOccurances(bool value);

      /**
      *@brief set a flag to have a paramter passed with it
      *@param[in] value (bool) value to set. By default flags do not take parameters
      */
      template&lt;typename T&gt;
      void HasParameter(bool value);

      /**
       * @brief Set if the flag is optional.
       * @tparam T The type of the flag.
       * @param[in] value (bool) If the flag is optional.
       */
      template&lt;typename T&gt;
      void IsOptional(bool value);
    protected:
      ModelPipeline* model_pipeline_;         //!&lt; a model pipeline passed by the constructor
      MeshPipeline* mesh_pipeline_;           //!&lt; a mesh pipeline passed by the constructor
      MaterialPipeline* material_pipeline_;   //!&lt; a material pipeline passed by the constructor
      TexturePipeline* texture_pipeline_;     //!&lt; a texture pipeline passed by the constructor
      ShaderPipeline* shader_pipeline_;       //!&lt; a shader pipeline passed by the constructor
      SkeletonPipeline* skeleton_pipeline_;   //!&lt; a skeleton pipeline passed by the constructor
      AnimationPipeline* animation_pipeline_; //!&lt; an animation pipeline passed by the constructor
      ScriptPipeline* script_pipeline_;       //!&lt; a script pipeline passed by the constructor
      AudioPipeline* audio_pipeline_;         //!&lt; an audio pipeline passed by the constructor
      SceneLoader* scene_loader_;             //!&lt; a scene loader passed by the constructor

    private:
      template&lt;typename... Args&gt;
      using  derived_from_flag = foundation::and_cond&lt;eastl::is_base_of&lt;Flag, Args&gt;...&gt;; //!&lt; condition to check if all types in Args... are derived from Flag
      Syntax syntax_; //!&lt; syntax of the command as specified in the constructor
    };

    template&lt;typename ...Args&gt;
    inline bool ICommand::SetValidFlags()
    {
      static_assert(derived_from_flag&lt;Args...&gt;::value,
        &#34;invalid flag(s) usind in template parameter pack &#34;
        &#34;SetValidFlags&lt;Args...&gt;(int position). flags must derive from Flag class&#34;);
      while (syntax_.valid_flags.empty() == false)
      {
        delete syntax_.valid_flags.back();
        syntax_.valid_flags.pop_back();
      }
      syntax_.valid_flags = { new Args()... };
      return true;
    }

    template&lt;typename T&gt;
    inline void ICommand::AllowMultipleOccurances(bool value)
    {
      static_assert(std::is_base_of&lt;Flag, T&gt;::value,
        &#34;invalid flag query, all flags must be derived from &#39;Flag&#39;&#34;);
      T tmp = T();
      for (Flag* flag : syntax_.valid_flags)
      {
        if (tmp == flag)
        {
          flag-&gt;set_allow_multiple(value);
          return;
        }
      }
      // throw an error
    }

    template&lt;typename T&gt;
    inline void ICommand::HasParameter(bool value)
    {
      static_assert(std::is_base_of&lt;Flag, T&gt;::value,
        &#34;invalid flag query, all flags must be derived from &#39;Flag&#39;&#34;);
      T tmp = T();
      for (Flag* flag : syntax_.valid_flags)
      {
        if (*flag == tmp.GetKey())
        {
          flag-&gt;set_has_argument(value);
          return;
        }
      }
      // throw an error
    }

    template&lt;typename T&gt;
    inline void ICommand::IsOptional(bool value)
    {
      static_assert(std::is_base_of&lt;Flag, T&gt;::value,
        &#34;invalid flag query, all flags must be derived from &#39;Flag&#39;&#34;);
      T tmp = T();
      for (Flag* flag : syntax_.valid_flags)
      {
        if (*flag == tmp.GetKey())
        {
          flag-&gt;set_optional(value);
          return;
        }
      }
      // throw an error
    }

    template&lt;typename T&gt;
    inline const char* CommandInput::GetFlagArg(unsigned int index) const
    {
      unsigned int count = 0; 
      unsigned int curr_index = 0;
      T tmp = T();
      for (Flag* flag : flags_)
      {
        if (*flag == tmp.GetKey())
        {
          if (count == index)
          {
            return flag_args_[curr_index].c_str();
          }
          &#43;&#43;count;
        }
        &#43;&#43;curr_index;
      }
      return &#34;&#34;;
    }

    template&lt;typename T&gt;
    inline const char* CommandInput::GetFlagArg() const
    {
      unsigned int curr_index = 0;
      T tmp = T();
      for (Flag* flag : flags_)
      {
        if (*flag == tmp.GetKey())
        {
          return flag_args_[curr_index].c_str();
        }
        &#43;&#43;curr_index;
      }
      return &#34;&#34;;
    }

    template&lt;typename T&gt;
    inline bool CommandInput::HasFlag(unsigned int&amp; num_occurrences) const
    {
      static_assert(std::is_base_of&lt;Flag, T&gt;::value,
        &#34;invalid flag query, all flags must be derived from &#39;Flag&#39;&#34;);

      num_occurrences = FlagCount&lt;T&gt;();
      return num_occurrences != 0;
    }

    template&lt;typename T&gt;
    unsigned int CommandInput::FlagCount() const
    {
      static_assert(std::is_base_of&lt;Flag, T&gt;::value,
        &#34;invalid flag query, all flags must be derived from &#39;Flag&#39;&#34;);
      unsigned int count = 0;
      T tmp = T();
      for (Flag* flag : flags_)
      {
        if (*flag == tmp.GetKey())
        {
          &#43;&#43;count;
        }
      }
      return count;
    }

    template&lt;typename T&gt;
    inline bool CommandInput::HasFlag() const
    {
      static_assert(std::is_base_of&lt;Flag, T&gt;::value,
        &#34;invalid flag query, all flags must be derived from &#39;Flag&#39;&#34;);

      T tmp = T();
      for (Flag* flag : flags_)
      {
        if (*flag == tmp.GetKey())
        {
          return true;
        }
      }
      return false;
    }
  }
}
       </code></pre>

          </div>
           <div class="text">Classes used to create a command for the sulphur builder CLI.</div>
        </div>
        
        
        
        <div class="snippet slideshow_fade">
          <div class="numbertext"> 2 / 4</div>
          <div class="codesnippet">
            <pre><code class="cpp">
        #include &#34;rotate_gizmo.h&#34;
#include &#34;engine\systems\components\camera_system.h&#34;
#include &#34;engine\systems\components\transform_system.h&#34;
#include &#34;engine\graphics\debug_render_system.h&#34;
#include &#34;engine\assets\asset_system.h&#34;
#include &#34;foundation\math\ray.h&#34;

#include &#34;engine\networking\editor\editor_messaging_system.h&#34;
#include &#34;engine\networking\editor\editor_message_payloads.h&#34;

namespace sulphur
{
  namespace engine
  {

    //------------------------------------------------------------------------------------------------------
    RotateGizmo::RotateGizmo() :
      accumulated_rotation_(glm::quat(1,0,0,0)),
      kRadius_(1.0f),
      kSelectionThreshold_(0.1f),
      rotation_(glm::quat(1, 0, 0, 0)),
      rotation_x_axis_(glm::vec3(1, 0, 0)),
      rotation_y_axis_(glm::vec3(0, 1, 0)),
      rotation_z_axis_(glm::vec3(0, 0, 1)),
      display_mode_(DisplayMode::kUnused)
    {
    }

    //------------------------------------------------------------------------------------------------------
    void RotateGizmo::Initialize()
    {
      Mesh* rotation_mesh = foundation::Memory::Construct&lt;Mesh&gt;();
      circle_mesh_.AttachMesh(
        Mesh::CreateLineCircle(),
        glm::vec3(),
        glm::quat(1, 0, 0, 0),
        glm::vec3(kRadius_, kRadius_, 1.0f));

      gizmo_mesh_ = AssetSystem::Instance().AddAsset(rotation_mesh, &#34;rotate_gizmo&#34;);
      gizmo_mesh_-&gt;SetTopologyType(graphics::TopologyType::kLine);
      gizmo_mesh_-&gt;SetAlwaysOnTop(true);
    }

    //------------------------------------------------------------------------------------------------------
    void RotateGizmo::Release()
    {
      gizmo_mesh_ = MeshHandle();
    }

    //------------------------------------------------------------------------------------------------------
    void RotateGizmo::ManipulationStart(const foundation::Ray&amp; camera_ray, foundation::Vector&lt;TransformComponent&gt;&amp;)
    {
      float t_min;
      float t_max;
      if (camera_ray.IntersectSphere(position(), kRadius_ * scale(), t_min, t_max) == false)
      {
        return;
      }
      glm::vec3 intersect = camera_ray.origin &#43; camera_ray.direction * t_min;
      glm::vec3 v = intersect - position();
      switch (rotate_mode_)
      {
      case sulphur::engine::RotateGizmo::RotateMode::kAxis:
      {
        float dot = glm::dot(rotation_axis_, v);
        glm::vec3 p = intersect - dot * rotation_axis_;
        previous_intersect_ = p - position();
        break;
      }
      case sulphur::engine::RotateGizmo::RotateMode::kFree:
        previous_intersect_ = glm::vec3(0, 0, 0);
        break;
      }
      set_is_manipulating(true);
    }

    //------------------------------------------------------------------------------------------------------
    void RotateGizmo::ManipulateTransforms(
      foundation::Vector&lt;TransformComponent&gt;&amp;,
      const foundation::Ray&amp; camera_ray,
      TransformComponent camera_transform,
      editor::EditorMessagingSystem&amp;)
    {
      rotation_x_axis_ = RotateVector(glm::vec3(1, 0, 0), rotation_);
      rotation_y_axis_ = RotateVector(glm::vec3(0, 1, 0), rotation_);
      rotation_z_axis_ = RotateVector(glm::vec3(0, 0, 1), rotation_);
      glm::quat applied_rotation = glm::quat(1,0,0,0);

      switch (rotate_mode_)
      {
      case sulphur::engine::RotateGizmo::RotateMode::kAxis:
      {
        float t_min;
        float t_max;
        if (camera_ray.IntersectSphere(position(), kRadius_ * scale(), t_min, t_max) == false)
        {
          return;
        }
        glm::vec3 intersect = camera_ray.origin &#43; camera_ray.direction * t_min;
        glm::vec3 normal = intersect - position();
        glm::vec3 current_intersect = previous_intersect_;
        float dot;

        dot = glm::dot(rotation_axis_, normal);
        glm::vec3 point = intersect - dot * rotation_axis_;
        current_intersect = point - position();
        dot = glm::dot(current_intersect, previous_intersect_);
        float sqrt = glm::sqrt(glm::length2(current_intersect) * glm::length2(previous_intersect_));
        float angle = glm::acos(dot / sqrt);
        glm::vec3 cross = glm::cross(current_intersect, previous_intersect_);
        dot = glm::dot(cross, rotation_axis_);

        if (glm::isnan(angle) == true)
        {
          return;
        }
        if (dot &gt; 0.0f)
        {
          angle *= -1;
        }
        glm::quat rotation = glm::angleAxis(angle, rotation_axis_);
        glm::quat temp_rot = rotation_;
        applied_rotation = glm::inverse(temp_rot) * rotation * temp_rot;
        previous_intersect_ = current_intersect;
        break;
      }
      case sulphur::engine::RotateGizmo::RotateMode::kFree:
        glm::vec3 camera_y_axis = camera_transform.GetLocalUp();
        glm::vec3 camera_x_axis = camera_transform.GetLocalRight();
        float t;
        camera_ray.IntersectPlane(-camera_transform.GetLocalForward(), camera_ray.origin, t);
        glm::vec3 intersect = camera_ray.origin &#43; camera_ray.direction &#43; t;
        //positions on the near z plane
        float x = -(glm::dot(camera_x_axis, intersect - camera_ray.origin));
        float y = glm::dot(camera_y_axis, intersect - camera_ray.origin);
        if (glm::length(previous_intersect_) == 0)
        {
          previous_intersect_ = { x,y,0 };
          applied_rotation = glm::quat(1, 0, 0, 0);
          break;
        }

        float x_angle = y - previous_intersect_.y;
        float y_angle = x - previous_intersect_.x;

        glm::quat rotation = glm::angleAxis(x_angle, camera_x_axis);
        glm::quat temp_rot = rotation_;
        applied_rotation = glm::inverse(temp_rot) * rotation * temp_rot;

        rotation = glm::angleAxis(y_angle, camera_y_axis);
        temp_rot = rotation_;
        applied_rotation *= glm::inverse(temp_rot) * rotation * temp_rot;

        previous_intersect_ = { x,y, 0.0f };
      {
        break;
      }
      }
      accumulated_rotation_ = applied_rotation * accumulated_rotation_;

      // rotation_ *= applied_rotation;
      // attached[0].SetWorldRotation(rotation_);
    }

    void RotateGizmo::RequestChange(editor::EditorMessagingSystem&amp; system, foundation::Vector&lt;TransformComponent&gt;&amp; attached)
    {
      glm::vec3 vec{ accumulated_rotation_.x, accumulated_rotation_.y, accumulated_rotation_.z };
      if (glm::length2(vec) == 0.0f)
      {
        return;
      }

      editor::EntityRotatePayload payload;
      payload.entity_index = attached[0].GetHierarchyIndex();
      payload.w = accumulated_rotation_.w;
      payload.x = accumulated_rotation_.x;
      payload.y = accumulated_rotation_.y;
      payload.z = accumulated_rotation_.z;
      system.SendToEditor(editor::EditorMessageID::kEntityRotated, payload);
      accumulated_rotation_ = {1,0,0,0 };
    }

    //------------------------------------------------------------------------------------------------------
    void RotateGizmo::ManipulationEnd()
    {
      display_mode_ = DisplayMode::kUnused;
      set_is_manipulating(false);
    }

    //------------------------------------------------------------------------------------------------------
    void RotateGizmo::Draw(foundation::Vector&lt;TransformComponent&gt;&amp; attached_entities)
    {
      if (attached_entities.size() == 0)
      {
        return;
      }

      ConstructMesh();
      set_position(attached_entities[0].GetWorldPosition());
      rotation_ = attached_entities[0].GetWorldRotation();
      DebugRenderSystem::DrawMesh(gizmo_mesh_, position(), rotation_, glm::vec3(scale()));
    }

    //------------------------------------------------------------------------------------------------------
    bool RotateGizmo::Select(const foundation::Ray&amp; camera_ray)
    {
      float t_min;
      float t_max;

      if (camera_ray.IntersectSphere(position(), kRadius_ * scale(), t_min, t_max) == false)
      {
        return false;
      }

      rotate_mode_ = RotateMode::kAxis;
      glm::vec3 intersection = camera_ray.origin &#43; camera_ray.direction * t_min;
      glm::vec3 normal = glm::normalize(intersection - position());
      rotation_axis_ = rotation_x_axis_;
      float dot = glm::dot(normal, rotation_axis_);
      if (dot &gt; -kSelectionThreshold_ &amp;&amp; dot &lt; kSelectionThreshold_)
      {
        display_mode_ = DisplayMode::kXAxisSelected;
        return true;
      }

      rotation_axis_ = rotation_z_axis_;
      dot = glm::dot(normal, rotation_axis_);
      if (dot &gt; -kSelectionThreshold_ &amp;&amp; dot &lt; kSelectionThreshold_)
      {
        display_mode_ = DisplayMode::kZAxisSelected;
        return true;
      }

      rotation_axis_ = rotation_y_axis_;
      dot = glm::dot(normal, rotation_axis_);
      if (dot &gt; -kSelectionThreshold_ &amp;&amp; dot &lt; kSelectionThreshold_)
      {
        display_mode_ = DisplayMode::kYAxisSelected;
        return true;
      }

      rotate_mode_ = RotateMode::kFree;
      return true;
    }

    //------------------------------------------------------------------------------------------------------
    void RotateGizmo::ConstructMesh()
    {
      gizmo_mesh_-&gt;Clear(true);
      foundation::Color mesh_colors_[] = {
        foundation::Color::kBlue,
        foundation::Color::kGreen,
        foundation::Color::kRed
      };

      if (display_mode_ != DisplayMode::kUnused)
      {
        mesh_colors_[static_cast&lt;size_t&gt;(display_mode_)] = foundation::Color::kYellow;
      }

      circle_mesh_.SetColor(mesh_colors_[static_cast&lt;size_t&gt;(DisplayMode::kZAxisSelected)]);
      gizmo_mesh_-&gt;AttachMesh(circle_mesh_);

      circle_mesh_.SetColor(mesh_colors_[static_cast&lt;size_t&gt;(DisplayMode::kYAxisSelected)]);
      gizmo_mesh_-&gt;AttachMesh(circle_mesh_, glm::vec3(), glm::inverse(kRot90X));

      circle_mesh_.SetColor(mesh_colors_[static_cast&lt;size_t&gt;(DisplayMode::kXAxisSelected)]);
      gizmo_mesh_-&gt;AttachMesh(circle_mesh_, glm::vec3(),kRot90Y);
    }

    //------------------------------------------------------------------------------------------------------
    glm::vec3 RotateGizmo::RotateVector(const glm::vec3&amp; v, const glm::quat&amp; q)
    {
      glm::quat uint_q = glm::normalize(q);
      glm::quat pure_q(0.0f, v.x, v.y, v.z);
      glm::quat result = uint_q * pure_q * glm::conjugate(uint_q);
      return glm::vec3(result.x, result.y, result.z);
    }
  }
}
       </code></pre>

          </div>
           <div class="text">engine side implementation of the rotate gizmo</div>
        </div>
        
        
        
        <div class="snippet slideshow_fade">
          <div class="numbertext"> 3 / 4</div>
          <div class="codesnippet">
            <pre><code class="cpp">
        ﻿using System;
using System.Runtime.InteropServices;
using System.Reflection;

namespace sulphur
{
  namespace editor
  {
    /**
       * @interface sulphur.editor.IMessageContainer
       * @brief Interface defined so we can store all types of message containers in a single array.
       * @author Stan Pepels
       */
    public interface IMessageContainer
    {
      /**
       * @brief Function used to create an object out of byte data.
       * @param[in] data (byte[]) Byte data to be converted.
       * @return (object) Object created from the byte array.
       */
      object Create(byte[] data);
    }

    /**
     * @class sulphur.editor.MessageContainer&lt;T&gt; : sulphur.editor.IMessageContainer
     * @brief class used to message structs from byte arays.
     * @author Stan Pepels
     */
    class MessageCreator&lt;T&gt; : IMessageContainer where T : struct
    {
      /**
       * @see sulphur.editor.IMessageContainer.Create.
       * @remark Object returned is of type T.
       */
      public object Create(byte[] data)
      {
        return Utils.BytesToStruct&lt;T&gt;(data);
      }
    }

    /**
     * @class sulphur.editor.AssociateEnumToStruct : Attribute
     * @brief Allows a struct type to be associated with an enum.
     * @author Stan Pepels
     */
    [AttributeUsage(AttributeTargets.Field, AllowMultiple = false, Inherited = true)]
    public class AssociateEnumToStruct : Attribute
    {
      /**
       * @brief constructor that creates an object of the type passed.
       * @param[in] type (Type) The type to associate with the field this attribute is used on.
       * @remark The type passed must implement the sulphur.editor.I\IMessageContainer interface
       */
      public AssociateEnumToStruct(Type type)
      {
        Type[] interfaces = type.GetInterfaces();
        Type interface_type = typeof(IMessageContainer);
        foreach (Type i in interfaces)
        {
          if (i == interface_type)
          {
            obj = Activator.CreateInstance(type) as IMessageContainer;
            return;
          }
        }
        obj = null;
      }

      /**
       * @brief object that can be used to convert a byte array to a message struct.
       */
      public IMessageContainer obj { get; private set; }
    }

    namespace native
    {
      namespace messages
      {
        /**
         *@struct sulphur.editor.native.messages.StringMessage
         *@brief message for sending / retrieving a string message from / to the engine
         *@author Stan Pepels  
         */
        [StructLayout(LayoutKind.Sequential)]
        struct StringMessage
        {
          public byte[] bytes; //!&lt; byte array containg the string data in 1byte char values
        }

        /**
         *@struct sulphur.editor.native.messages.AssetInstantiatedPayload
         *@brief message for sending an instantiate message to the engine 
         *@see sulphur.editor.native.NetworkMessages.kAssetInstantiated
         *@author Stan Pepels
         */
        [StructLayout(LayoutKind.Sequential)]
        struct AssetInstantiatedPayload
        {
          public UInt64 asset_id; //!&lt; id of the asset to be instantiated
        }

        /**
         *@struct sulphur.editor.native.messages.WindowHandleMessage
         *@brief message for providing a waiting engine with a window handle to render to
         *@see sulphur.editor.native.NetworkMessages.kWindowhandle
         *@author Maarten ten Velden
         */
        [StructLayout(LayoutKind.Sequential)]
        struct WindowHandleMessage
        {
          public Int64 handle; //!&lt; The window handle to render to
        }

        /**
         *@struct sulphur.editor.native.messages.EntityCreatedMessage
         *@brief message for creating a new entity in the engine with an optional parent
         *@see sulphur.editor.native.NetworkMessages.kEntityCreated
         *@author Maarten ten Velden
         */
        [StructLayout(LayoutKind.Sequential)]
        struct EntityCreatedMessage
        {
          public UInt64 entity_index; //!&lt; The index in the hierarchy of the new entity
          public UInt64 sibling_index; //!&lt; The sibling index of the new entity
          public UInt64 parent_index; //!&lt; The index in the hierarchy of the new entity&#39;s parent (or UInt64.MaxValue to indicate no parent)
          [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]
          public float[] position; //!&lt; Position to instantiate the object at.

          [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
          public float[] rotation; //!&lt; Rotation to instantiate the object at.

          [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]
          public float[] scale; //!&lt; Scale to instantiate the object at.

        }

        /**
         *@struct sulphur.editor.native.messages.EntityDestroyedMessage
         *@brief message for deleting an existing entity from the engine
         *@see sulphur.editor.native.NetworkMessages.kEntityDestroyed
         *@author Maarten ten Velden
         */
        [StructLayout(LayoutKind.Sequential)]
        struct EntityDestroyedMessage
        {
          public UInt64 entity_index; //!&lt; The index in the hierarchy of the entity to be destroyed
        }
        /**
         *@struct sulphur.editor.native.messages.EntityReparentedMessage
         *@brief message for modifying an existing entity&#39;s parent in the engine
         *@see sulphur.editor.native.NetworkMessages.kEntityReparented
         *@author Maarten ten Velden
         */
        [StructLayout(LayoutKind.Sequential)]
        struct EntityReparentedMessage
        {
          public UInt64 entity_old_index; //!&lt; The index before reparenting in the hierarchy of the entity
          public UInt64 new_parent_old_index; //!&lt; The index before reparenting in the hierarchy of the entity&#39;s new parent (or UInt64.MaxValue to indicate no parent)
          public UInt64 new_sibling_index; //!&lt; The index after reparenting in the hierarchy of the entity
        }

        /**
        *@struct sulphur.editor.native.messages.EntitySelectedMessage
        *@brief message used to indicate that an entity was selected in the editor.
        *@see sulphur.editor.native.NetworkMessages.kEntitySelected
        *@author Stan Pepels
        */
        [StructLayout(LayoutKind.Sequential)]
        struct EntitySelectedMessage
        {
          public UInt64 entity_index; //!&lt; index of the entity in the world hierarchy.
        }

        /**
        *@struct sulphur.editor.native.messages.EntityMovedMessage
        *@brief message used to indicate that an entity was moved in the editor.
        *@see sulphur.editor.native.NetworkMessages.kEntityMoved
        *@author Stan Pepels
        */
        [StructLayout(LayoutKind.Sequential)]
        struct EntityMovedMessage
        {
          public UInt64 entity_index; //!&lt; index of the entity in the world hierarchy.
          public float x; //!&lt; The amount of units to move the entity along the world x axis.
          public float y; //!&lt; The amount of units to move the entity along the world y axis.
          public float z; //!&lt; The amount of units to move the entity along the world z axis.
        }

        /**
        *@struct sulphur.editor.native.messages.SetTransformGizmoMessage
        *@brief message used to indicate a different transform gizmo was selected.
        *@see sulphur.editor.native.NetworkMessages.kSetTransformGizmo
        *@author Stan Pepels
        */
        [StructLayout(LayoutKind.Sequential)]
        struct SetTransformGizmoMessage
        {
          /**
           * @brief Enum of gizmo types.
           */
          public enum Type
          {
            kTranslate, //!&lt; Gizmo used to move an entity in the scen view.
            kRotate, //!&lt; Gizmo used to rotate an entity in the scene view.
            kScale //!&lt; Gizmo used to scale an entity in the scene view.
          }

          public Int32 type; //!&lt; The type of transform gizmo to use.
        }

        /**
        *@struct sulphur.editor.native.messages.EntityScaleMessage
        *@brief message used to indicate that an entity was scaled in the editor.
        *@see sulphur.editor.native.NetworkMessages.kEntityScaled
        *@author Stan Pepels
        */
        [StructLayout(LayoutKind.Sequential)]
        struct EntityScaleMessage
        {
          public UInt64 entity_index; //!&lt; index of the entity in the world hierarchy.
          public float x; //!&lt; The scaling to be applied in the x direction.
          public float y; //!&lt; The scaling to be applied in the y direction.
          public float z; //!&lt; The scaling to be applied in the z direction.
        };

        /**
        *@struct sulphur.editor.native.messages.EntityRotateMessage
        *@brief message used to indicate that an entity was rotated in the editor.
        *@see sulphur.editor.native.NetworkMessages.kEntityRotated
        *@author Stan Pepels
        */
        [StructLayout(LayoutKind.Sequential)]
        struct EntityRotateMessage
        {
          public UInt64 entity_index; //!&lt; index of the entity in the world hierarchy.
          public float w; //!&lt; The w component of the quaternion with which to rotate the entity.
          public float x; //!&lt; The x component of the quaternion with which to rotate the entity.
          public float y; //!&lt; The y component of the quaternion with which to rotate the entity.
          public float z; //!&lt; The z component of the quaternion with which to rotate the entity.
        };

        /**
        *@struct sulphur.editor.native.messages.LoadProjectMessage
        *@brief message that a different project was loaded.
        *@see sulphur.editor.native.NetworkMessages.kLoadProject
        *@author Stan Pepels
        */
        [StructLayout(LayoutKind.Sequential)]
        struct LoadProjectMessage
        {
          /**
           * @brief Constructor used to put the string into a fixed size byte array.
           * @param[in] path (string) The value to contstruct the byte array from.
           */
          public LoadProjectMessage(string path)
          {
            directory_path = new byte[Networking.kMaxPayLoadSize - 1];
            byte[] str_bytes = System.Text.Encoding.ASCII.GetBytes(path);

            Buffer.BlockCopy(str_bytes, 0, directory_path, 0, str_bytes.Length);
          }
          [MarshalAs(UnmanagedType.ByValArray, SizeConst = (int)Networking.kMaxPayLoadSize - 1)]
          byte[] directory_path; //!&lt; Byte array with data containning the converted path string.
        };
      }

      /**
       *@see sulphur::engine::MessageID 
       */
      public enum NetworkMessages : uint
      {
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.WindowHandleMessage&gt;))]       kWindowHandle = 0,
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.EntityCreatedMessage&gt;))]      kEntityCreated, //!&lt; The creation of a new entity
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.EntityDestroyedMessage&gt;))]    kEntityDestroyed, //!&lt; The destruction of an existing entity
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.EntityReparentedMessage&gt;))]   kEntityReparented, //!&lt; The change of an existing entity&#39;s parent
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.AssetInstantiatedPayload&gt;))]  kAssetInstantiated, //!&lt; The instantiation of an asset in the world
        kComponentAdded, //!&lt; The creation of a new component on an entity
        kComponentRemoved, //!&lt; The destruction of an existing component on an entity
        kCacheChanged, //!&lt; Notification that the asset-cache must be reloaded
        kFastBackward, //!&lt; A request from the editor to start rewinding
        kPreviousFrame,  //!&lt; A request from the editor to rewind one frame
        kStartedPlaying, //!&lt; A request from the editor to start playing the game
        kStoppedPlaying, //!&lt; A request from the editor to stop playing the game
        kPause,
        kContinuePlaying,
        kNextFrame,  //!&lt; A request from the editor to forward one frame
        kFastForward,  //!&lt; A request from the editor to fast forward
        kStartRewinding, //!&lt; A request from the editor to start rewinding
        kStopRewinding, //!&lt; A request from the editor to stop rewinding
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.EntitySelectedMessage&gt;))]     kObjectSelected, //!&lt; An object got selected via a control in the editor.
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.SetTransformGizmoMessage&gt;))]  kSetTransformGizmo, //!&lt; Sets the current type of transform gizmo to use.
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.EntitySelectedMessage&gt;))]     kEntitySelected, //!&lt; A notification from the editor that acretain entity was selected.
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.EntityMovedMessage&gt;))]        kEntityMoved, //!&lt; A Notification from the editor that an entity was moved.
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.EntityRotateMessage&gt;))]       kEntityRotated, //!&lt; A Notification from the editor that an entity was rotated.
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.EntityScaleMessage&gt;))]        kEntityScaled, //!&lt; A Notification from the editor that an entity was scaled.
        [AssociateEnumToStruct(typeof(MessageCreator&lt;messages.LoadProjectMessage&gt;))]        kLoadProject, //!&lt; A Notification from the editor that a different project was loaded.
        kNumMessages, //!&lt; The amount of unique messages that can be received
      }

      /**
       *@class sulphur.editor.native.Networking
       *@brief class with static functions to leveradge the sulphur-networking
       *@author Stan Pepels   
       */
      class Networking
      {
        public const uint kPacketSize = 512; //!&lt; max size of a package in bytes
        public const uint kMaxPayLoadSize = kPacketSize - sizeof(UInt32); //!&lt; max payload size of a package

        /**
         *@struct sulphur.editor.native.Networking.Packet
         *@brief struct for retrieving a packet from the sukphur-networking.dll
         *@author Stan Pepels   
         */
        public struct Packet
        {
          public byte[] data; //!&lt; data that came with the packet
        }
        /**
         *@see sulphur::networking::editor::ErrorMessage 
         */
        public enum ErrorMessage : uint
        {
          kOk, //!&lt; ok
          kEnetInitFailed, //!&lt; Enet failed to initialise
          kHostCreateFailed, //!&lt; Creating a host failed
          kResolveIpFailed, //!&lt; Resolving the IP address failed
          kConnectFailed, //!&lt; Connecting to IP failed
          kPacketCreationFailed, //!&lt; Failed to create a packet
          kNoPeerConnected, //!&lt; No peer connected
          kPacketSendFailed //!&lt; Failed to send a packet
        };

        /**
         *@see sulphur::networking::editor::SNetInitEditor 
         */
        [DllImport(&#34;sulphur-networking.dll&#34;)]
        public static extern ErrorMessage SNetInitEditor();

        /**
         *@see sulphur::networking::editor::SNetEditorConnect 
         */
        [DllImport(&#34;sulphur-networking.dll&#34;)]
        public static extern ErrorMessage SNetEditorConnect(string ip, UInt32 port);

        /**
         *@see sulphur::networking::editor::SNetRetrievePacket 
         */
        [DllImport(&#34;sulphur-networking.dll&#34;)]
        public static extern bool_ SNetRetrievePacket(ref UInt32 id, [Out]byte[] buf, uint size = kMaxPayLoadSize);

        /**
         *@see sulphur::networking::editor::SNetSendData 
         */
        [DllImport(&#34;sulphur-networking.dll&#34;)]
        public static extern ErrorMessage SNetSendData(UInt32 id, byte[] buf, uint size = kMaxPayLoadSize);

        /**
         *@see sulphur::networking::editor::SNetDestroy 
         */
        [DllImport(&#34;sulphur-networking.dll&#34;)]
        public static extern void SNetDestroy();

        /**
         *@see sulphur::networking::editor::SNetIsConnected 
         */
        [DllImport(&#34;sulphur-networking.dll&#34;)]
        public static extern bool_ SNetIsConnected();

        /**
         *@see sulphur::networking::editor::SNetFlushPackets 
         */
        [DllImport(&#34;sulphur-networking.dll&#34;)]
        public static extern void SNetFlushPackets();
      }
    } // native
  } // editor
} // sulphur

       </code></pre>

          </div>
           <div class="text">editor side classes used to communicate with the editor via a neworked connection.</div>
        </div>
        
        
        
        <div class="snippet slideshow_fade">
          <div class="numbertext"> 4 / 4</div>
          <div class="codesnippet">
            <pre><code class="cpp">
        ﻿using System.Xml;
using System.IO;

namespace sulphur.editor
{
  /**
   * @class sulphur.editor.Project
   * @brief Class responsible for doing operation such as loading projects and creating new projects.
   * @author Stan Pepels
   */
  class Project
  {
    /**
     * @brief Absolute directory path to the directory the *.spr file used to load the current project is located in. 
     */
    public static string directory_path { get; private set; } = &#34;&#34;;

    /**
     * @brief Absolute file path to the *.spr file used to load the current project.
     */
    public static string path_ { get; private set; } = &#34;&#34;;

    /**
     * @brief Name of the currently loaded project.
     */
    public static string name_ { get; private set; } = &#34;&#34;;

    /**
     * @brief Project relative path to the current world being edited.
     */
    public static string current_world_ { get; set; } = &#34;&#34;;

    /**
     * @brief Loads a new project at a given filepath
     * @param[in] path (string) Absolute or relative filepath to a *.spr file.
     * @return (bool) True if the project was loaded succesfully, false otherwise.
     * @remark This function reinitializes the asset pipelines.
     */
    public static bool Load(string path)
    {
      path_ = path;
      directory_path = path.Substring(0, path.LastIndexOf(&#34;\\&#34;));

      XmlReaderSettings settings = new XmlReaderSettings();
      XmlReader reader = XmlReader.Create(path, settings);
      using (reader)
      {
        while (reader.Read())
        {
          if (reader.IsStartElement() &amp;&amp; reader.Name == &#34;ProjectSettings&#34;)
          {
            ReadSettings(reader);
          }
        }
      }
      native.AssetProcessor.SetProjectDirectory(directory_path);
      native.AssetProcessor.SetOutputPath(directory_path);
      native.AssetProcessor.SetPackageOutputPath(&#34;resources&#34;);
      return true;
    }

    /**
     * @brief Creates a new project at a given path.
     * @param[in] path (string) Location of the *.spr.
     * @return (bool) True if the project was created succesfully, false otherwise.
     * @remarks This will create an &#34;assets&#34; and &#34;resources&#34; folder in the project directory. 
     * @remarks Calling this function will reinitialize the asset pipelines.
     * @remarks Calling this function will overwrite any project allready located in the target directory.
     */
    public static bool CreateNew(string path)
    {
      path_ = path;
      directory_path = path.Substring(0, path.LastIndexOf(&#34;\\&#34;));
      // create the folders required
      if (Directory.Exists(directory_path &#43; &#34;\\resources&#34;) == false)
      {
        Directory.CreateDirectory(directory_path &#43; &#34;\\resources&#34;);
      }

      if (Directory.Exists(directory_path &#43; &#34;\\assets&#34;) == false)
      {
        Directory.CreateDirectory(directory_path &#43; &#34;\\assets&#34;);
      }
      
      current_world_ = &#34;assets\\main.swo&#34;;

      // write the settings to a new project file
      XmlWriterSettings settings = new XmlWriterSettings();
      settings.Indent = true;
      settings.IndentChars = &#34;\t&#34;;
      XmlWriter xml_writer = XmlWriter.Create(path, settings);
      using (xml_writer)
      {
        xml_writer.WriteStartElement(&#34;ProjectSettings&#34;);
        xml_writer.WriteAttributeString(&#34;Name&#34;, path.Substring(path.LastIndexOf(&#34;\\&#34;) &#43; 1));
        xml_writer.WriteElementString(&#34;World&#34;, current_world_);
        xml_writer.WriteEndElement();
        xml_writer.Close();
      }
      native.AssetProcessor.SetProjectDirectory(directory_path);
      native.AssetProcessor.SetOutputPath(directory_path);
      native.AssetProcessor.SetPackageOutputPath(&#34;resources&#34;);

      if(CreateEmptyWorld() == false)
      {
        Log.Write(Log.Verbosity.kError, &#34;Unable to create or register world&#34;);
        return false;
      }

      if (CreateEmptyMainScript() == false)
      {
        Log.Write(Log.Verbosity.kError, &#34;Unable to create or register empty main script&#34;);
        return false;
      }
      return true;
    }

    /**
     * @brief Reads the settings from a *.spr file.
     * @param[in] reader (XmlReader) Reader that reads the *.spr file with its read location set to the &#39;ProjectSettings&#39; element.
     */
    private static void ReadSettings(XmlReader reader)
    {
      reader.MoveToFirstAttribute();
      name_ = reader[0].Remove(reader[0].IndexOf(&#34;.&#34;));
      reader.MoveToElement();

      while (reader.Read())
      {
        switch (reader.Name)
        {
          case &#34;World&#34;:
            current_world_ = reader.ReadElementContentAsString();
            break;
        }

        if (reader.Name == &#34;ProjectSettings&#34; &amp;&amp; reader.NodeType == XmlNodeType.EndElement)
        {
          break;
        }
      }
    }

    private static bool CreateEmptyMainScript()
    {
      StreamWriter file_writer = new StreamWriter(directory_path &#43; &#34;\\assets\\main.lua&#34;);
      file_writer.WriteLine(&#34;function OnInitialize()&#34;);
      file_writer.WriteLine(&#34;end&#34;);
      file_writer.WriteLine();
      file_writer.WriteLine(&#34;function Update(dt)&#34;);
      file_writer.WriteLine(&#34;end&#34;);
      file_writer.WriteLine();
      file_writer.WriteLine(&#34;function FixedUpdate()&#34;);
      file_writer.WriteLine(&#34;end&#34;);
      file_writer.Close();

      ulong id = 0;
      native.AssetProcessor.RegisterWorld(current_world_, ref id);
      return native.AssetProcessor.ImportScript(&#34;assets\\main.lua&#34;, ref id);
    }

    private static bool CreateEmptyWorld()
    {
      File.CreateText(directory_path &#43; &#34;\\assets\\main.swo&#34;).Close();
      File.CreateText(directory_path &#43; &#34;\\resources\\main.sbw&#34;).Close();
      ulong id = 0;
      return native.AssetProcessor.RegisterWorld(current_world_, ref id);
    }
  }
}

       </code></pre>

          </div>
           <div class="text">Implementation of how projects are created in the editor.</div>
        </div>
        
        
        <a class="prev_btn" id="slideshow_btn" onclick="plusSnippet(-1)">&#10094;</a>
        <a class="next_btn" id="slideshow_btn" onclick="plusSnippet(1)">&#10095;</a>
        
      </div>
      <div style="text-align:center">
        
        <span class="snippet_dot" onclick="currentSnippet( 0 )"></span>
        
        <span class="snippet_dot" onclick="currentSnippet( 1 )"></span>
        
        <span class="snippet_dot" onclick="currentSnippet( 2 )"></span>
        
        <span class="snippet_dot" onclick="currentSnippet( 3 )"></span>
        
      </div>

    </div>
    


    <div>
      <h2>Summary</h2>
      Project sulphur is a cross-platform engine project by NHTV students. The engine is build in C&#43;&#43; with an editor build in .Net WPF framework. The engine has a special feature we call the &#39;sulphur rewinder&#39;. This feature allows you to rewind the game in the editor and inspect the data from previous frames. Besides this the editor is completely detached from the engine meaning that if the engine crashes there is no progress lost and the editor can recover.
      
      <div style="margin-top: 0.2em;">
        <a class="btn btn-primary btn-outline" href="https://projectsulphur.com/" target="_blank" rel="noopener">Go to Project Site</a>
      </div>
      
    </div>
    <div class="container">
      <div class="row tools">
        <div class="col-md-4">
          <h2>Responsibilities</h2>
          <ul>
            
            <li>Sulphur builder: interface</li>
            
            <li>Sulphur builder: shader pipeline</li>
            
            <li>Sulphur builder: world pipeline</li>
            
            <li>Sulphur editor: gizmos</li>
            
            <li>Sulphur editor: world view</li>
            
            <li>Sulphur editor: logger</li>
            
            <li>Sulphur editor: playback controls</li>
            
            <li>Sulphur editor: project setup</li>
            
            <li>Sulphur editor/engine network communication</li>
            
          </ul>
        </div>
        <div class="col-md-3">
          <h2>Tools Used</h2>
          <div class="row tools">

            <div class="column tools_column">
              
              
              <div class="logo_card">
                <a href="https://www.visualstudio.com/" target="_blank">
                  <img src="/img/icons/visual-studio.png" class="icon">
                </a>
                <div class="card-text">
                  visual studio
                </div>
              </div>
              
              
              
              
              
              
              
              <div class="logo_card">
                <a href="http://www.stack.nl/~dimitri/doxygen/" target="_blank">
                  <img src="/img/icons/doxygen.png" class="icon">
                </a>
                <div class="card-text">
                  Doxygen
                </div>
              </div>
              
              
            </div>
            <div class="column tools_column">
              
              
              
              
              <div class="logo_card">
                <a href="https://docs.microsoft.com/en-us/dotnet/framework/wpf/" target="_blank">
                  <img src="/img/icons/wpf.png" class="icon">
                </a>
                <div class="card-text">
                  wpf
                </div>
              </div>
              
              
              
              
              
              
            </div>
            <div class="column tools_column">
              
              
              
              
              
              
              <div class="logo_card">
                <a href="https://nl.atlassian.com/software/jira" target="_blank">
                  <img src="/img/icons/jira.png" class="icon">
                </a>
                <div class="card-text">
                  Jira
                </div>
              </div>
              
              
              
              
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <h2>Team</h2>
          <p>
            
            Designers: 1 <br>
            
            Programmers: 14 <br>
            
          </p>
          
          <h2>Project length</h2>
          <p>
            32 weeks
          </p>
          
        </div>
      </div>
    </div>
    <div class="article-style" itemprop="articleBody">

      <h2>Details</h2>
      <p>Project sulphur can be subdivided into 3 catagories: engine, builder and editor. <br>
<ul>
    <li><strong>The engine:</strong> is the library with all the functionality required to run the game such as rendering, physics, networking etc&hellip; This is completely written in C++.
    <li><strong>The builder:</strong> is a standalone command line tool that is used to package raw assets into game-ready formats used by the engine. Like the engine, this is written in C++.
    <li><strong>The editor:</strong> is the environment where the features of the engine are exposed in a user-friendly interface. This is where you can create your game projects, levels etc&hellip; The editor is mainly written in C#/xaml but uses some DLLs written in C++.
</ul></p>

<div style="position: relative;">
    
    <strong>Engine work:</strong> My main work on the engine is on the interfaces that allow the engine to communicate with the engine. The engine is connected to the editor via the network.
This means that the engine you see in the editor is its own separate process. Another benefit of this connection is that we could, in theory, launch a second or even a third engine in editor mode and have all engines connect to a single editor instance.
These other versions could run on other machines such as a PS4 devkit. This, in turn, would then allow for simultaneous testing and developing for multiple platforms without having to switch around platforms or create a build before testing.
    
</div>

<p><div style="float: right; position: relative; width: 50%;">
    <div>
        <img src="/gifs/sulphur-builder.gif" style="display: block;
  width: 100%;
             
             margin: 5% 0% 0% 0%;"/>
                                      
    </div>
    
    <div style="text-align: center; font-size: 70%; margin-bottom: 0%;">Converting multiple assets types using the sulphur builder.</div>
    
</div>
<div style="position: relative;">
    
    <strong>Builder work:</strong> With the builder I mainly worked on the command line interfaces. These interfaces allow other programmers to easily add commands with flags and arguments to the builder. I was also responsible for doing the shader pipeline.
The shader pipeline takes in a shader written in hlsl with some custom definitions. This single file is then converted into a shader package that can be loaded by the engine and used to render with Directx12, Vulkan, and GNM(PS4).
    
</div></p>

<p><div style="float: left; position: relative; width: 50%;">
    <div>
        <img src="/gifs/sulphur-editor.gif" style="display: block;
  width: 100%;
             
             margin: 3% 0% 0% -3%;"/>
                                      
    </div>
    
    <div style="text-align: center; font-size: 70%; margin-bottom: 0%;">Assets can also be imported in the editor and instantiated in the world.</div>
    
</div>
<div style="position: relative;">
    
    <p><strong>Editor work:</strong> Most of my contribution in this project was with the editor. I wrote the interface and utility classes that allow the editor to receive, process and send messages to connected engines.
I also wrote an interface that allows controls and systems to be developed completely separate whilst still being able to act upon actions or event that happen in different systems. Besides this, I was responsible for creating the world-view, asset browser, logger, and menu bar.
The editor also has a project pipeline allowing you to set up multiple game projects. Each project can be shared with other people since all paths are relative.</p>

<p>Under the hood, the editor uses a DLL version of the sulphur builder. I worked on exposing the sulphur builder(written in C++) functionality to C# so it can be used by the editor.</p>

    
</div></p>

    </div>

    <p class="project-download">
      
      
      <a href="https://github.com/ProjectSulphur/ProjectSulphur" class="btn btn-primary btn-outline" target="_blank">
        Download
      </a>
      
      
    </p>
  </div>
</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="/project/abduckted/"><span
      aria-hidden="true">&larr;</span> Previous</a></li>
    

    
    <li class="next"><a href="/project/agr/">Next <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<script>
  var snippetIndex = 1;
  showSnippets(snippetIndex)
  toggleSnippets()

  function showSnippets(n) {
    var i;
    var slides = document.getElementsByClassName("snippet");
    if (slides.length == 0) {
      return;
    }


    var dots = document.getElementsByClassName("snippet_dot");
    if (n > slides.length) { snippetIndex = 1 }
    if (n < 1) { snippetIndex = slides.length }
    for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
    }
    for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" dot_active", "");
    }
    slides[snippetIndex - 1].style.display = "block";
    dots[snippetIndex - 1].className += " dot_active";
  }

  function plusSnippet(n) {
    showSnippets(snippetIndex += n);
  }

  function currentSnippet(n) {
    showSnippets(snippetIndex = n + 1);
  }



  var slideIndex = 1;
  showSlides(slideIndex);

  function toggleSnippets() {
    var btns = document.getElementsByClassName("snippet-toggle");
    for (i = 0; i < btns.length; i++) {
      if (btns[i].classList.contains("active")) {
        btns[i].classList.remove("active");
      }
      else {
        btns[i].className += " active";
      }
    }



    var containers = document.getElementsByClassName("snippet-container");
    for (i = 0; i < containers.length; i++) {
      if (containers[i].style.display != "none") {
        containers[i].style.display = "none";
      }
      else if (containers[i].style.display == "none") {
        containers[i].style.display = "block";
      }
    }
  }




  function stopVideo(element) {
    var wrapper = element.querySelector('.videoWrapper');

    if (wrapper) {
      var iframe = element.querySelector('iframe');
      var video = element.querySelector('video');
      if (iframe) {
        var iframeSrc = iframe.src;
        iframe.src = iframeSrc;
      }
      if (video) {
        video.pause();
      }
    }
  };

  function plusSlides(n) {
    stopVideo(document.getElementsByClassName("mySlides")[slideIndex - 1]);
    showSlides(slideIndex += n);
  }

  function currentSlide(n) {
    stopVideo(document.getElementsByClassName("mySlides")[slideIndex - 1]);
    showSlides(slideIndex = n + 1);
  }

  function showSlides(n) {
    var i;
    var slides = document.getElementsByClassName("mySlides");
    var dots = document.getElementsByClassName("dot");
    if (n > slides.length) { slideIndex = 1 }
    if (n < 1) { slideIndex = slides.length }
    for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
    }
    for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" dot_active", "");
    }
    slides[slideIndex - 1].style.display = "block";
    dots[slideIndex - 1].className += " dot_active";
  }
</script>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Your Name &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/cpp.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

